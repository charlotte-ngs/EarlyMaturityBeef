---
title: "ReferenceManager How-To"
author: "Peter von Rohr"
date: "2018-09-26"
output: html_notebook
bibliography: references.bib
---

This notebook provides some examples on how to work with the package `ReferenceManager` from ropenscie.


## Documentation
The vignette seams to be available from https://arxiv.org/pdf/1403.2036v1.pdf


## Installation
The package is installed via

```{r eval=FALSE}
devtools::install_github("ropensci/RefManageR")
```

## The Plan
The set of tools and functionalities described here should allow for parallelized authoring of the same document by many people. Each author should have a separate working copy and a local git-repository. At any time it should be possible to build the whole document by all authors without changing the source code of the document manually. 

Based on these requirements the following properties must be satisfied.

* At least one author must have access to a reference manager database where all cited literature items are stored
* The reference manager allows to export a .bib-file containing a complete list of all cited literature items
* The bibliography file must have the same name for all authors
* The bibliography file must be versioned by git and must be pushed to the remote repository. This allows for a build of the complete document for anybody who does not have access to the central reference database

The following parameters are different for all authors

* The path to the .bib-file that was exported from the reference manager.


## Workflow




## Examples and Tests
Working through the examples in the vignette leads to

```{r}
s_bib_file <- system.file("Bib", "biblatexExamples.bib", package = "RefManageR")
stopifnot(file.exists(s_bib_file))
bib <- RefManageR::ReadBib(s_bib_file, check = FALSE)
print(bib[c("cms", "jcg", "ctan")], .opts = list(check.entries = FALSE))
```


## Output
Writing some records to a bibfile

```{r}
RefManageR::BibOptions(check.entries = FALSE)
RefManageR::toBiblatex(bib[c("cms", "jcg", "ctan")])
```

The whole thing is written to a file using `cat()`. 

```{r}
# cat(RefManageR::toBiblatex(bib[c("cms", "jcg", "ctan")]), file = "references.bib", sep = "\n")
RefManageR::WriteBib(bib = bib[c("cms", "jcg", "ctan")])
```

Then, we try to use the `citr`-package addin to include citations. 

The citations used with `citr` produces the following: [@jcg].

Yet anoter citation in [@ctan].

A citation with out brackets @cms. 

## References
